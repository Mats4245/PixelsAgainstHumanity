<!doctype html>
<html lang="en">

<head>
  <title>Hypertext Against People</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="//cdn.jsdelivr.net/bootstrap/latest/css/bootstrap.min.css" rel="stylesheet">
  <script src="//cdn.jsdelivr.net/react/latest/react.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io.connect();
    //server state
    var messages = [];
    var players = [];
    //this client's state
    var name = '';
    var text = '';
    //React.createElement to draw DOM components
    //prevent default on form submits
    socket.on('connect', function() {
      console.log('connected');
      //receive id from server?
      setName();
    });
    socket.on('message', function(msg) {
      console.log('message')
      console.log(msg);
      messages.push(msg);
      //list of messages
      //update bound dom element ("messages")
    });
    socket.on('roster', function(names) {
      console.log('roster');
      console.log(names);
      players = names;
      //list of players
      //update bound dom element ("players")
    });
    //player state
    //hand
    //board state
    //decks
    //black card
    //white cards
    //server deals hand to all players
    //server draws top black card
    //players click card in hand to play
    //server detects when all players have played card
    //card czar selects winning card (rotate among players)]
    //winning card player is revealed and score added
    function send() {
      //grab content from dom?
      console.log('Sending message:', text);
      socket.emit('message', text);
    }

    function setName() {
      socket.emit('identify', name);
    }
  </script>
</head>

<body>
  <div class="container">
    <h1>Hypertext Against People</h1>
    <ul class="nav nav-list well" id="players"> </ul>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th class="span2">Name</th>
          <th class="span7">Text</th>
        </tr>
      </thead>
      <tbody id="messages"> </tbody>
    </table>
    <div class="row">
      <form onsubmit="send()" class="form-inline">
        <input type="text" class="form-control" placeholder="Your Name">
        <input type="text" class="form-control" placeholder="Message">
        <input type="submit" class="btn btn-primary" value="Send"> </form>
    </div>
  </div>
</body>

</html>
